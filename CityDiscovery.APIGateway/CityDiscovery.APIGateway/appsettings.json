{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "Yarp": "Debug"
    }
  },
  "Serilog": {
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft.AspNetCore": "Warning",
        "Yarp": "Debug"
      }
    },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {CorrelationId} {Message:lj}{NewLine}{Exception}"
        }
      }
    ]
  },
  "AllowedHosts": "*",
  "Jwt": {
    "Issuer": "identity",
    "Audience": "citydiscovery",
    "Key": "pLw3V!zJg7^2qK0xD8mR4tY1uC6bN9fQ5sH3kL0wX2yZ8rT6vB1nM4pQ7sU2dE9"
  },
  "RateLimiting": {
    "PermitLimit": 100,
    "WindowSeconds": 60,
    "QueueLimit": 2
  },
  "DownstreamServices": {
    "Identity": "http://identity-service:80",
    "Venue": "http://venue-service:80",
    "Social": "http://social-service:80",
    "Review": "http://review-service:80",
    "Admin": "http://admin-service:80"
  },
  "ReverseProxy": {
    "Routes": {
      "avatar-route": {
        "ClusterId": "identity-cluster",
        "Match": {
          "Path": "/uploads/avatars/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/uploads/avatars/{**catch-all}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "auth-route": {
        "ClusterId": "identity-cluster",
        "Match": {
          "Path": "/api/auth/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/auth/{**catch-all}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "users-public-route": {
        "ClusterId": "identity-cluster",
        "Match": {
          "Path": "/api/users/{userId}/exists"
        },
        "Transforms": [
          {
            "PathPattern": "/api/users/{userId}/exists"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "users-bulk-route": {
        "ClusterId": "identity-cluster",
        "Match": {
          "Path": "/api/users/bulk",
          "Methods": [
            "POST"
          ]
        },
        "Transforms": [
          {
            "PathPattern": "/api/users/bulk"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "users-role-route": {
        "ClusterId": "identity-cluster",
        "Match": {
          "Path": "/api/users/{userId}/role"
        },
        "Transforms": [
          {
            "PathPattern": "/api/users/{userId}/role"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "users-active-route": {
        "ClusterId": "identity-cluster",
        "Match": {
          "Path": "/api/users/active"
        },
        "Transforms": [
          {
            "PathPattern": "/api/users/active"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "users-by-city-route": {
        "ClusterId": "identity-cluster",
        "Match": {
          "Path": "/api/users/by-city/{city}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/users/by-city/{city}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "users-all-route": {
        "ClusterId": "identity-cluster",
        "Match": {
          "Path": "/api/users/all"
        },
        "Transforms": [
          {
            "PathPattern": "/api/users/all"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "RequireAdminRole"
        }
      },
      "users-route": {
        "ClusterId": "identity-cluster",
        "Match": {
          "Path": "/api/users/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/users/{**catch-all}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "RequireAuthenticatedUser"
        }
      },
      "categories-route": {
        "ClusterId": "venue-cluster",
        "Match": {
          "Path": "/api/categories/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/categories/{**catch-all}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "locations-route": {
        "ClusterId": "venue-cluster",
        "Match": {
          "Path": "/api/locations/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/locations/{**catch-all}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "venues-public-get-route": {
        "ClusterId": "venue-cluster",
        "Match": {
          "Path": "/api/venues/{venueId}",
          "Methods": [
            "GET"
          ]
        },
        "Transforms": [
          {
            "PathPattern": "/api/venues/{venueId}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "venues-public-batch-route": {
        "ClusterId": "venue-cluster",
        "Match": {
          "Path": "/api/venues/batch",
          "Methods": [
            "POST"
          ]
        },
        "Transforms": [
          {
            "PathPattern": "/api/venues/batch"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "venues-public-exists-route": {
        "ClusterId": "venue-cluster",
        "Match": {
          "Path": "/api/venues/{venueId}/exists"
        },
        "Transforms": [
          {
            "PathPattern": "/api/venues/{venueId}/exists"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "venues-public-basic-route": {
        "ClusterId": "venue-cluster",
        "Match": {
          "Path": "/api/venues/{venueId}/basic"
        },
        "Transforms": [
          {
            "PathPattern": "/api/venues/{venueId}/basic"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "venues-public-by-owner-route": {
        "ClusterId": "venue-cluster",
        "Match": {
          "Path": "/api/venues/by-owner/{ownerId}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/venues/by-owner/{ownerId}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "venues-photos-get-route": {
        "ClusterId": "venue-cluster",
        "Match": {
          "Path": "/api/venues/{venueId}/photos",
          "Methods": [
            "GET"
          ]
        },
        "Transforms": [
          {
            "PathPattern": "/api/venues/{venueId}/photos"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "venues-photos-route": {
        "ClusterId": "venue-cluster",
        "Match": {
          "Path": "/api/venues/{venueId}/photos/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/venues/{venueId}/photos/{**catch-all}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "RequireAuthenticatedUser"
        }
      },
      "venues-menu-get-route": {
        "ClusterId": "venue-cluster",
        "Match": {
          "Path": "/api/venues/{venueId}/menu",
          "Methods": [
            "GET"
          ]
        },
        "Transforms": [
          {
            "PathPattern": "/api/venues/{venueId}/menu"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "venues-menu-categories-route": {
        "ClusterId": "venue-cluster",
        "Match": {
          "Path": "/api/venues/{venueId}/menu-categories/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/venues/{venueId}/menu-categories/{**catch-all}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "RequireAuthenticatedUser"
        }
      },
      "venues-menu-items-route": {
        "ClusterId": "venue-cluster",
        "Match": {
          "Path": "/api/menu-categories/{categoryId}/items/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/menu-categories/{categoryId}/items/{**catch-all}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "RequireAuthenticatedUser"
        }
      },
      "venues-events-get-route": {
        "ClusterId": "venue-cluster",
        "Match": {
          "Path": "/api/venues/{venueId}/events",
          "Methods": [
            "GET"
          ]
        },
        "Transforms": [
          {
            "PathPattern": "/api/venues/{venueId}/events"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "venues-events-route": {
        "ClusterId": "venue-cluster",
        "Match": {
          "Path": "/api/venues/{venueId}/events/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/venues/{venueId}/events/{**catch-all}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "RequireAuthenticatedUser"
        }
      },
      "events-route": {
        "ClusterId": "venue-cluster",
        "Match": {
          "Path": "/api/events/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/events/{**catch-all}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "RequireAuthenticatedUser"
        }
      },
      "menu-items-route": {
        "ClusterId": "venue-cluster",
        "Match": {
          "Path": "/api/menu-items/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/menu-items/{**catch-all}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "RequireAuthenticatedUser"
        }
      },
      "venue-categories-route": {
        "ClusterId": "venue-cluster",
        "Match": {
          "Path": "/api/venue-categories/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/venue-categories/{**catch-all}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "RequireAuthenticatedUser"
        }
      },
      "venues-route": {
        "ClusterId": "venue-cluster",
        "Match": {
          "Path": "/api/venues/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/venues/{**catch-all}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "RequireAuthenticatedUser"
        }
      },
      "posts-route": {
        "ClusterId": "social-cluster",
        "Match": {
          "Path": "/api/posts/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/posts/{**catch-all}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "RequireAuthenticatedUser"
        }
      },
      "savedposts-route": {
        "ClusterId": "social-cluster",
        "Match": {
          "Path": "/api/savedposts/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/savedposts/{**catch-all}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "RequireAuthenticatedUser"
        }
      },
      "reviews-venue-public-route": {
        "ClusterId": "review-cluster",
        "Match": {
          "Path": "/api/reviews/venue/{venueId}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/reviews/venue/{venueId}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "reviews-venue-summary-route": {
        "ClusterId": "review-cluster",
        "Match": {
          "Path": "/api/reviews/venue/{venueId}/summary"
        },
        "Transforms": [
          {
            "PathPattern": "/api/reviews/venue/{venueId}/summary"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "reviews-has-reviewed-route": {
        "ClusterId": "review-cluster",
        "Match": {
          "Path": "/api/reviews/user/{userId}/has-reviewed/{venueId}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/reviews/user/{userId}/has-reviewed/{venueId}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "reviews-route": {
        "ClusterId": "review-cluster",
        "Match": {
          "Path": "/api/reviews/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/reviews/{**catch-all}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "RequireAuthenticatedUser"
        }
      },
      "favorites-public-route": {
        "ClusterId": "review-cluster",
        "Match": {
          "Path": "/api/favorites/user/{userId}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/favorites/user/{userId}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "favorites-route": {
        "ClusterId": "review-cluster",
        "Match": {
          "Path": "/api/favorites/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/favorites/{**catch-all}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "RequireAuthenticatedUser"
        }
      },
      "admin-dashboard-route": {
        "ClusterId": "admin-cluster",
        "Match": {
          "Path": "/api/admin/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/admin/{**catch-all}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "RequireAdminRole"
        }
      },
      "notifications-route": {
        "ClusterId": "admin-cluster",
        "Match": {
          "Path": "/api/notifications/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/notifications/{**catch-all}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "RequireAuthenticatedUser"
        }
      },
      "feedback-route": {
        "ClusterId": "admin-cluster",
        "Match": {
          "Path": "/api/feedback/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/feedback/{**catch-all}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "RequireAuthenticatedUser"
        }
      },
      "reports-route": {
        "ClusterId": "admin-cluster",
        "Match": {
          "Path": "/api/reports/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/reports/{**catch-all}"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "RequireAuthenticatedUser"
        }
      },
      "identity-swagger-route": {
        "ClusterId": "identity-cluster",
        "Match": {
          "Path": "/swagger/identity/{**catch-all}"
        },
        "Transforms": [
          {
            "PathRemovePrefix": "/swagger/identity"
          },
          {
            "PathPrefix": "/swagger"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "venue-swagger-route": {
        "ClusterId": "venue-cluster",
        "Match": {
          "Path": "/swagger/venue/{**catch-all}"
        },
        "Transforms": [
          {
            "PathRemovePrefix": "/swagger/venue"
          },
          {
            "PathPrefix": "/swagger"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "social-swagger-route": {
        "ClusterId": "social-cluster",
        "Match": {
          "Path": "/swagger/social/{**catch-all}"
        },
        "Transforms": [
          {
            "PathRemovePrefix": "/swagger/social"
          },
          {
            "PathPrefix": "/swagger"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "review-swagger-route": {
        "ClusterId": "review-cluster",
        "Match": {
          "Path": "/swagger/review/{**catch-all}"
        },
        "Transforms": [
          {
            "PathRemovePrefix": "/swagger/review"
          },
          {
            "PathPrefix": "/swagger"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      },
      "admin-swagger-route": {
        "ClusterId": "admin-cluster",
        "Match": {
          "Path": "/swagger/admin/{**catch-all}"
        },
        "Transforms": [
          {
            "PathRemovePrefix": "/swagger/admin"
          },
          {
            "PathPrefix": "/swagger"
          }
        ],
        "Metadata": {
          "AuthorizationPolicy": "Anonymous"
        }
      }
    },
    "Clusters": {
      "identity-cluster": {
        "Destinations": {
          "identity-destination": {
            "Address": "http://identity-service:80/"
          }
        },
        "HealthCheck": {
          "Active": {
            "Enabled": true,
            "Interval": "00:00:30",
            "Timeout": "00:00:10",
            "Policy": "ConsecutiveFailures",
            "Path": "/health"
          }
        }
      },
      "venue-cluster": {
        "Destinations": {
          "venue-destination": {
            "Address": "http://venue-service:80/"
          }
        },
        "HealthCheck": {
          "Active": {
            "Enabled": true,
            "Interval": "00:00:30",
            "Timeout": "00:00:10",
            "Policy": "ConsecutiveFailures",
            "Path": "/health"
          }
        }
      },
      "social-cluster": {
        "Destinations": {
          "social-destination": {
            "Address": "http://social-service:80/"
          }
        },
        "HealthCheck": {
          "Active": {
            "Enabled": true,
            "Interval": "00:00:30",
            "Timeout": "00:00:10",
            "Policy": "ConsecutiveFailures",
            "Path": "/health"
          }
        }
      },
      "review-cluster": {
        "Destinations": {
          "review-destination": {
            "Address": "http://review-service:80/"
          }
        },
        "HealthCheck": {
          "Active": {
            "Enabled": true,
            "Interval": "00:00:30",
            "Timeout": "00:00:10",
            "Policy": "ConsecutiveFailures",
            "Path": "/health"
          }
        }
      },
      "admin-cluster": {
        "Destinations": {
          "admin-destination": {
            "Address": "http://admin-service:80/"
          }
        },
        "HealthCheck": {
          "Active": {
            "Enabled": true,
            "Interval": "00:00:30",
            "Timeout": "00:00:10",
            "Policy": "ConsecutiveFailures",
            "Path": "/health"
          }
        }
      }
    }
  }
}